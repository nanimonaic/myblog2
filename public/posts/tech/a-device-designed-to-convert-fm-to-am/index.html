<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A device designed to convert FM to AM | nanimonai's Blog</title><meta name=keywords content><meta name=description content="Electronic Design Competition School Competition"><meta name=author content="nanimonai"><link rel=canonical href=https://blog.nanimonai.org/posts/tech/a-device-designed-to-convert-fm-to-am/><link crossorigin=anonymous href=/assets/css/stylesheet.8dc51781c85c4e1478cc2c27791f96bc57032d0efa65fb0911e90cc302c02dbb.css integrity="sha256-jcUXgchcThR4zCwneR+WvFcDLQ76ZfsJEekMwwLALbs=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://img.nanimonai.org/headimg.jpg><link rel=icon type=image/png sizes=16x16 href=https://img.nanimonai.org/headimg.jpg><link rel=icon type=image/png sizes=32x32 href=https://img.nanimonai.org/headimg.jpg><link rel=apple-touch-icon href=https://img.nanimonai.org/headimg.jpg><link rel=mask-icon href=https://img.nanimonai.org/headimg.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://blog.nanimonai.org/posts/tech/a-device-designed-to-convert-fm-to-am/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><meta property="og:title" content="A device designed to convert FM to AM"><meta property="og:description" content="Electronic Design Competition School Competition"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.nanimonai.org/posts/tech/a-device-designed-to-convert-fm-to-am/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-20T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-20T00:00:00+00:00"><meta property="og:site_name" content="Neuromancer"><meta name=twitter:card content="summary"><meta name=twitter:title content="A device designed to convert FM to AM"><meta name=twitter:description content="Electronic Design Competition School Competition"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"技术","item":"https://blog.nanimonai.org/tech/"},{"@type":"ListItem","position":2,"name":"A device designed to convert FM to AM","item":"https://blog.nanimonai.org/posts/tech/a-device-designed-to-convert-fm-to-am/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A device designed to convert FM to AM","name":"A device designed to convert FM to AM","description":"Electronic Design Competition School Competition","keywords":[],"articleBody":"前情提要 电子设计大赛是一种比较有意思的比赛（信号方向）。本来我是不想写这篇文章的（lak腔调），毕竟搓那个设计报告搓得我脑袋冒烟，还得注意各种格式问题。但转言之就是希望能给后辈们留下点东西，不至于说从0开始再踩一遍坑于是就有了这篇文章。同时呢，相对的也在篇章开头处感谢我的队友，感谢这两年来一直帮助我的朋友们，希望可以有个好的结果。\n赛题 一、任务\n设计并制作一套FM到AM转换装置\n二、要求\n1．基本要求\n（1）FM发射装置函数信号发射器直接产生，调制频率范围88MHz 到108MHz，调制频率1KHz,调制频偏75KHz，载波幅度2VPP(50Ω阻抗)。\n（2）制作一个调频接收机，接收机接收频率范围为88MHz 到108MHz中的某一个频点，能够接受并解调出1KHz信号，幅度要求1VPP。\n（3）能够手动或者数控改变接收机的接收频点。\n2．发挥部分\n（1）制作一个调幅发射机，调制深度50%,载波频率范围为500K到1MHz；\n（2）将调频接收机接收到的信号进行解调，然后送入自制的调幅发射机进行发射。\n（3）调幅发射机输出幅度10VPP(50Ω阻抗),能够手动/数控改变调幅发射机的载波频点。\n（4）进一步扩展解调电台接收的频率范围，具备自动搜台转发功能。\n三、 说明\n在调幅输出端预留测试端点（供测试）\n调幅发射出来的信号可用收音机进行接收。\n路线 本系统以两块STM32F103C8T6为控制核心。该设计前级分为两路：第一路采用STM32F103C8T6与TEA5767集成FM接收模块搭建模拟频率解调电路，第二路利用第二块STM32F103C8T6与AD9833型号的直接数字频率合成（Direct Digital Synthesis，简称DDS）功能信号发生器，产生幅度调制信号所需参数的载波。\n第一路模拟频率解调后的调制信号，经过一个NE5532构成的有源带通滤波器（通带为1kHz）和一个无源滤波器后，进入第二个NE5532实现的反相放大和直流偏置模块，从而在过滤掉噪声波形的同时给予所调信号需要的增益和直流偏置量。第二路由DDS信号发生器产生1MHz的正弦波信号作载波，由于DDS模块限制其幅值仅能达到约200mv（1MHz下，500kHz约为250mv），且带有一定的直流量，故设计由VCA821压控增益放大器为核心的前级调理网络，加以隔直网络。两路输出信号进入AD835乘法器模块进行信号调制，再进入THS3091功率放大器模块进行放大，达到题目对调幅发射机输出幅度的要求，最后经过一个中心频率为1MHz的AD8066滤波器模块对不需要的信号频率进行衰减。\n经过最终级联和调试，本系统实现题目全部要求。所有指标如解调信号参数、自动改变接收频点，调幅发射的调制深度等均符合题目要求，部分指标如解调电台接收的频率范围，调制发射器的载波频率范围均超过题目要求。\n困阻 刚开始看到某大学的校赛赛题里面竟然没有一道正常的信号题，哥几个人都有点懵了。唯一和信号沾点关联的还是这道射频，之前倒是没接触过。技术路线倒是很快敲定下来了。时间不足以支撑我们搓完和调试完整个模拟的FM解调系统，权衡之下还是使用了很多收音机里面采用的FM解调模块TEA5767（集成的就是屌）。一个人干了功放滤波AGCPLL的活，我们需要的仅仅是买一个TRRS转SMA把信号引入到我们后级的模块就好了。后面的路线根据通信原理书去设计就行，缺啥补啥。\n但我当时最惊诧的其实不是这个，因为仔细看题目，它已经把调制信号的参数框死了，意思是如果需要在AM调制前有一个1kHz，1Vpp的正弦波，拿DDS重建一个不就好了吗，何必解调出来再发射呢，没有现实意义。可以说是射频入门也可以说是射频炫技。当然这只是开始时候的幻想，思路是很快想好的，但是调试确实是一件非常难办的事情。恰值哥几个考试的考试，金工实训的实训，非常的狼狈。\n整体思路是非常明确的，就是一个“FM接收–调制信号调理—AM发射”的一个过程，在这之间要加上一些如偏置模块实现原始意义上的AM调制，然后要产生一路载波进乘法器。后面所谓“调幅发射机输出幅度10VPP(50Ω阻抗)”我们也找找进行了功放的选型，满足一下题目要求。\n放大器难题 载波那一路上，也就是DDS模块产生的信号幅值会随频率变化而改变，我们需要其幅值可控，最初设计以为需要放大10倍左右，后面发现功放的输入端不能进2Vpp以上的信号，非常难绷。我们这路用的是OXOX学长遗留的VCA821模块，把RG换了一下，然后正相输入端接地（原来是有DAC控制模式的差分信号压控增益放大器），再在信号输入端串一个隔直的50pF，不然这个AD9833引出来的分量到后面乘法器会把波形搞得一团糟。而解调出来的信息信号呢，只能说是各显神通，FFT看一下各类噪声都有，也不知道从哪来的，进行一个混的叠。滤完波之后要考虑的问题就是放大在前还是偏置加法器在前，我最初焊了个一体的，用的还不是电位器，但是效果肉眼可见的乐色。重要的是旋那俩电位器非常坐牢，本来后面或者前面那个要作跟随的，后面就没去往这方面再设计。先放大再偏置，而无源滤波器的效果达不到西瓜大人的预期，我们加了一个有源，也是NE5532的1kHz带通。由于电阻电容值误差比较小，滤波的效果非常好。前面所使用的无源模块刚刚好就成为了一个隔掉芯片输出直流偏置的良好模块——要隔离前面的直流分量主要是因为后面得过放大，模块的设计先后导致的。\n射频干扰难题 这一段我选择从我的设计报告摘录，熵叶还嫌我这一块没必要写。只能说，没亲身经历过这一魔法时刻的人是真真正正不能理解的，得下大篇幅去讲。你试想一下，哥们开开心心测刚刚蚀刻完焊接完的NE5532带通滤波器，然后发现他妈的示波器上面是一个90MHz的标准正弦波（混杂低频分量），调来调去不知道到底哪里有问题。最后哥几个一商量，滤波器和前级连的那根 SMA 一拔掉，示波器还在稳定输出90MHz；给芯片断掉供电，还在稳定输出！然后函数发生器output一关，直接清静了。\n“以电介质(空气、真空以及所有固态或液态绝缘体都属于电介质)隔开的任何两条导线之间都存在电容。如果一条导线上的电压发生变化，则另一导线上的电荷就会发生变化，而电介质中将出现位移电流。当电容或dV/dT很高时，就很容易耦合噪声。如果电路与干扰源之间的距离小于干扰波长(λ)除以2π，则电路在近场内工作。电路与干扰源之间的距离大于该数值，那么电路在远场内工作。\n一般情况下，可以使用导电外壳来屏蔽敏感电路，以免其受到这些外部场影响。这类材料可以形成与入射干扰的“阻抗不匹配”，原因是屏蔽体的阻抗小于入射场的波阻抗。导电屏蔽体的有效性取决于以下两项：首先是因屏蔽材料反射入射波而造成的损耗。其次是因屏蔽材料吸收透射波而造成的损耗。反射损耗量取决于干扰类型及其波阻抗。但是，吸收损耗量则与干扰类型无关。\n在调试的过程中，我们发现这版滤波器的PCB布线间距和走线宽度会导致整块板子形成一个类偶极子天线（如上图），这个天线能稳定地引入散发在空间中的FM信号并将其导入调制信号传递路径上。由于作品大小限制我们无法将该电路移出干扰源的近场工作（电路与干扰源之间的距离小于干扰波长除以2π，则电路在近场内工作。），给我们的调试带来很大的困扰。排查出问题之后，我们制作了一个简易的EMI防护设计，进行了打孔破坏间距、用胶带在滤波器电路板的背面缠上一块崭新的铜板等解决方法，保证电信号从屏蔽体外穿出，也保证良好接地，在PCB上无耦合通路，实现模块正常工作。并在之后改进了PCB的设计。”\n前半段的分析应该是笔者看Analog Devices的《EMI、RFI和屏蔽概念》时候想到的。如上所述，结合我们第一版PCB的构图，很难想象这块板子可以精准耦合90MHz的信号（经测试，在60M左右衰减得厉害，50M几乎无了）。最搞的是，另外组没有无源滤波器的PCB板子，他们拿的洞洞板，这洞洞板一插上SMA头，什么都不焊，接示波器就能稳定感应空间的电磁环境，洞洞板焊出来全是天线稳定接收（虽然事实证明干扰没那么大，过不了高频的放大模块不会将这个90MHz的分量放大，但是最后乘法器出来的波一直有一个幽灵一样的东西跟着）。我们队的解决方法是，因为这个滤波器效果太好了，虽然第一时间设计了更好的蚀刻PCB但是没再蚀刻，而是想到把一块单程铜板用透明胶狠狠把它和滤波器捆一起做一个EMI防护罩，同时也在原PCB上面打了几个孔。就能用了。\n不看参数难题 因为我们没看功率放大模块THS3091模块的最基本的参数范围（只看了芯片的），我们过完AD835的峰峰值可以来到4Vpp，大大超出了模块的2Vpp。当我们发现不行的时候一直想是不是供给电压不足、信号频率不对、噪声太大等，排查了一个夜晚，爽熬。信号被增益后波形直接失真非常难看，同时高频分量叠加，找不出哪里问题。后来单独对THS3091调试，模拟了我们的AM信号去试了一下发现也是失真，才发现是模块说明没看。非常头疼，只能说长教训，一定要多看手册模块芯片都看而不能只分析现象。\n代码难题 代码没有什么难题，代码高手说这次比赛唯一要记住的就是要认真看手册。但是代码手因为拾的一个编码器不能用红温了一个下午加晚上。\n联调难题 联调没有什么特殊的大问题，就如同拼积木。需要准备的有很多，比如三通的接口，良好的SMA TO BNC等等，老的线材都坏的差不多了，总是不好使而且坏的太快了得一直拿手给那摁着才能用。联调的时候电源模块是一个大问题，应该说电源转接板，把线性稳压电源的电压美观地供给给各个工作模块。我们拿蚀刻的板子整的，丐到自己都看不下去。第三是亚克力板，虽说纸板加电工胶还挺好看的，但是人穷志不可短，还是需要准备的。我看有的别校的同道中人拿一块大小适中的木板没绷住。\n总结 题目是比较简单的一道题目，但是确实可以反映出很多经验性或者学识性的问题。正式比赛是短时赛，没有思路或没有准备充分就代表着失败。代码工程文件和完整原理图未来应该会开源。\n感觉自己好蠢\n题外话 LibreOffice在EOS的适配有点小差，反正它和我的相性并不是很好。反正我只是作为一个阅读器而非编辑器的功能去使用，但是连翻页都卡顿的话…\n和朋友一起踢球是很美好的享受时刻\n厦门是一个很美丽的城市，自我放逐太久了，渐渐与时代脱轨。美食可愈三千疾。\n时间不够用，真的是在从指尖流逝\n想到什么再补充\nDONE.\n","wordCount":"60","inLanguage":"zh","datePublished":"2025-05-20T00:00:00Z","dateModified":"2025-05-20T00:00:00Z","author":[{"@type":"Person","name":"nanimonai"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.nanimonai.org/posts/tech/a-device-designed-to-convert-fm-to-am/"},"publisher":{"@type":"Organization","name":"nanimonai's Blog","logo":{"@type":"ImageObject","url":"https://img.nanimonai.org/headimg.jpg"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.nanimonai.org/ accesskey=h title="Neuromancer (Alt + H)"><img src=https://blog.nanimonai.org/apple-touch-icon.png alt aria-label=logo height=35>Neuromancer</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://blog.nanimonai.org/posts title=文章><span>文章</span></a></li><li><a href=https://blog.nanimonai.org/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://blog.nanimonai.org/link title=友链><span>友链</span></a></li><li><a href=https://blog.nanimonai.org/about/ title=关于><span>关于</span></a></li><li><a href=https://blog.nanimonai.org/archives/ title=归档><span>归档</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.nanimonai.org/>主页</a>&nbsp;»&nbsp;<a href=https://blog.nanimonai.org/tech/>技术</a></div><h1 class=post-title>A device designed to convert FM to AM</h1><div class=post-description>Electronic Design Competition School Competition</div></header><div class=post-content><h1 id=前情提要>前情提要<a hidden class=anchor aria-hidden=true href=#前情提要>#</a></h1><p>电子设计大赛是一种比较有意思的比赛（信号方向）。本来我是不想写这篇文章的（lak腔调），毕竟搓那个设计报告搓得我脑袋冒烟，还得注意各种格式问题。但转言之就是希望能给后辈们留下点东西，不至于说从0开始再踩一遍坑于是就有了这篇文章。同时呢，相对的也在篇章开头处感谢我的队友，感谢这两年来一直帮助我的朋友们，希望可以有个好的结果。</p><h1 id=赛题>赛题<a hidden class=anchor aria-hidden=true href=#赛题>#</a></h1><p>一、任务</p><p>设计并制作一套FM到AM转换装置</p><p>二、要求</p><p>1．基本要求</p><p>（1）FM发射装置函数信号发射器直接产生，调制频率范围88MHz 到108MHz，调制频率1KHz,调制频偏75KHz，载波幅度2VPP(50Ω阻抗)。</p><p>（2）制作一个调频接收机，接收机接收频率范围为88MHz 到108MHz中的某一个频点，能够接受并解调出1KHz信号，幅度要求1VPP。</p><p>（3）能够手动或者数控改变接收机的接收频点。</p><p>2．发挥部分</p><p>（1）制作一个调幅发射机，调制深度50%,载波频率范围为500K到1MHz；</p><p>（2）将调频接收机接收到的信号进行解调，然后送入自制的调幅发射机进行发射。</p><p>（3）调幅发射机输出幅度10VPP(50Ω阻抗),能够手动/数控改变调幅发射机的载波频点。</p><p>（4）进一步扩展解调电台接收的频率范围，具备自动搜台转发功能。</p><p>三、 说明</p><ol><li><p>在调幅输出端预留测试端点（供测试）</p></li><li><p>调幅发射出来的信号可用收音机进行接收。</p></li></ol><h1 id=路线>路线<a hidden class=anchor aria-hidden=true href=#路线>#</a></h1><p><img loading=lazy src=https://img.nanimonai.org/FM_FLOW.png>
本系统以两块STM32F103C8T6为控制核心。该设计前级分为两路：第一路采用STM32F103C8T6与TEA5767集成FM接收模块搭建模拟频率解调电路，第二路利用第二块STM32F103C8T6与AD9833型号的直接数字频率合成（Direct Digital Synthesis，简称DDS）功能信号发生器，产生幅度调制信号所需参数的载波。</p><p>第一路模拟频率解调后的调制信号，经过一个NE5532构成的有源带通滤波器（通带为1kHz）和一个无源滤波器后，进入第二个NE5532实现的反相放大和直流偏置模块，从而在过滤掉噪声波形的同时给予所调信号需要的增益和直流偏置量。第二路由DDS信号发生器产生1MHz的正弦波信号作载波，由于DDS模块限制其幅值仅能达到约200mv（1MHz下，500kHz约为250mv），且带有一定的直流量，故设计由VCA821压控增益放大器为核心的前级调理网络，加以隔直网络。两路输出信号进入AD835乘法器模块进行信号调制，再进入THS3091功率放大器模块进行放大，达到题目对调幅发射机输出幅度的要求，最后经过一个中心频率为1MHz的AD8066滤波器模块对不需要的信号频率进行衰减。</p><p>经过最终级联和调试，本系统实现题目全部要求。所有指标如解调信号参数、自动改变接收频点，调幅发射的调制深度等均符合题目要求，部分指标如解调电台接收的频率范围，调制发射器的载波频率范围均超过题目要求。</p><h1 id=困阻>困阻<a hidden class=anchor aria-hidden=true href=#困阻>#</a></h1><p>刚开始看到某大学的校赛赛题里面竟然没有一道正常的信号题，哥几个人都有点懵了。唯一和信号沾点关联的还是这道射频，之前倒是没接触过。技术路线倒是很快敲定下来了。时间不足以支撑我们搓完和调试完整个模拟的FM解调系统，权衡之下还是使用了很多收音机里面采用的FM解调模块TEA5767（集成的就是屌）。一个人干了功放滤波AGCPLL的活，我们需要的仅仅是买一个TRRS转SMA把信号引入到我们后级的模块就好了。后面的路线根据通信原理书去设计就行，缺啥补啥。</p><p>但我当时最惊诧的其实不是这个，因为仔细看题目，它已经把调制信号的参数框死了，意思是如果需要在AM调制前有一个1kHz，1Vpp的正弦波，拿DDS重建一个不就好了吗，何必解调出来再发射呢，没有现实意义。可以说是射频入门也可以说是射频炫技。当然这只是开始时候的幻想，思路是很快想好的，但是调试确实是一件非常难办的事情。恰值哥几个考试的考试，金工实训的实训，非常的狼狈。</p><p>整体思路是非常明确的，就是一个“FM接收&ndash;调制信号调理&mdash;AM发射”的一个过程，在这之间要加上一些如偏置模块实现原始意义上的AM调制，然后要产生一路载波进乘法器。后面所谓“调幅发射机输出幅度10VPP(50Ω阻抗)”我们也找找进行了功放的选型，满足一下题目要求。</p><h2 id=放大器难题>放大器难题<a hidden class=anchor aria-hidden=true href=#放大器难题>#</a></h2><p>载波那一路上，也就是DDS模块产生的信号幅值会随频率变化而改变，我们需要其幅值可控，最初设计以为需要放大10倍左右，后面发现功放的输入端不能进2Vpp以上的信号，非常难绷。我们这路用的是OXOX学长遗留的VCA821模块，把RG换了一下，然后正相输入端接地（原来是有DAC控制模式的差分信号压控增益放大器），再在信号输入端串一个隔直的50pF，不然这个AD9833引出来的分量到后面乘法器会把波形搞得一团糟。而解调出来的信息信号呢，只能说是各显神通，FFT看一下各类噪声都有，也不知道从哪来的，进行一个混的叠。滤完波之后要考虑的问题就是放大在前还是偏置加法器在前，我最初焊了个一体的，用的还不是电位器，但是效果肉眼可见的乐色。重要的是旋那俩电位器非常坐牢，本来后面或者前面那个要作跟随的，后面就没去往这方面再设计。先放大再偏置，而无源滤波器的效果达不到西瓜大人的预期，我们加了一个有源，也是NE5532的1kHz带通。由于电阻电容值误差比较小，滤波的效果非常好。前面所使用的无源模块刚刚好就成为了一个隔掉芯片输出直流偏置的良好模块——要隔离前面的直流分量主要是因为后面得过放大，模块的设计先后导致的。</p><h2 id=射频干扰难题>射频干扰难题<a hidden class=anchor aria-hidden=true href=#射频干扰难题>#</a></h2><p>这一段我选择从我的设计报告摘录，熵叶还嫌我这一块没必要写。只能说，没亲身经历过这一魔法时刻的人是真真正正不能理解的，得下大篇幅去讲。你试想一下，哥们开开心心测刚刚蚀刻完焊接完的NE5532带通滤波器，然后发现他妈的示波器上面是一个90MHz的标准正弦波（混杂低频分量），调来调去不知道到底哪里有问题。最后哥几个一商量，滤波器和前级连的那根 SMA 一拔掉，示波器还在稳定输出90MHz；给芯片断掉供电，还在稳定输出！然后函数发生器output一关，直接清静了。</p><p>“以电介质(空气、真空以及所有固态或液态绝缘体都属于电介质)隔开的任何两条导线之间都存在电容。如果一条导线上的电压发生变化，则另一导线上的电荷就会发生变化，而电介质中将出现位移电流。当电容或dV/dT很高时，就很容易耦合噪声。如果电路与干扰源之间的距离小于干扰波长(λ)除以2π，则电路在近场内工作。电路与干扰源之间的距离大于该数值，那么电路在远场内工作。</p><p>一般情况下，可以使用导电外壳来屏蔽敏感电路，以免其受到这些外部场影响。这类材料可以形成与入射干扰的“阻抗不匹配”，原因是屏蔽体的阻抗小于入射场的波阻抗。导电屏蔽体的有效性取决于以下两项：首先是因屏蔽材料反射入射波而造成的损耗。其次是因屏蔽材料吸收透射波而造成的损耗。反射损耗量取决于干扰类型及其波阻抗。但是，吸收损耗量则与干扰类型无关。</p><p><img loading=lazy src=https://img.nanimonai.org/FM_NE5532_1.0VER.png>
在调试的过程中，我们发现这版滤波器的PCB布线间距和走线宽度会导致整块板子形成一个类偶极子天线（如上图），这个天线能稳定地引入散发在空间中的FM信号并将其导入调制信号传递路径上。由于作品大小限制我们无法将该电路移出干扰源的近场工作（电路与干扰源之间的距离小于干扰波长除以2π，则电路在近场内工作。），给我们的调试带来很大的困扰。排查出问题之后，我们制作了一个简易的EMI防护设计，进行了打孔破坏间距、用胶带在滤波器电路板的背面缠上一块崭新的铜板等解决方法，保证电信号从屏蔽体外穿出，也保证良好接地，在PCB上无耦合通路，实现模块正常工作。并在之后改进了PCB的设计。”</p><p>前半段的分析应该是笔者看Analog Devices的《EMI、RFI和屏蔽概念》时候想到的。如上所述，结合我们第一版PCB的构图，很难想象这块板子可以精准耦合90MHz的信号（经测试，在60M左右衰减得厉害，50M几乎无了）。最搞的是，另外组没有无源滤波器的PCB板子，他们拿的洞洞板，这洞洞板一插上SMA头，什么都不焊，接示波器就能稳定感应空间的电磁环境，洞洞板焊出来全是天线稳定接收（虽然事实证明干扰没那么大，过不了高频的放大模块不会将这个90MHz的分量放大，但是最后乘法器出来的波一直有一个幽灵一样的东西跟着）。我们队的解决方法是，因为这个滤波器效果太好了，虽然第一时间设计了更好的蚀刻PCB但是没再蚀刻，而是想到把一块单程铜板用透明胶狠狠把它和滤波器捆一起做一个EMI防护罩，同时也在原PCB上面打了几个孔。就能用了。</p><h2 id=不看参数难题>不看参数难题<a hidden class=anchor aria-hidden=true href=#不看参数难题>#</a></h2><p>因为我们没看功率放大模块THS3091模块的最基本的参数范围（只看了芯片的），我们过完AD835的峰峰值可以来到4Vpp，大大超出了模块的2Vpp。当我们发现不行的时候一直想是不是供给电压不足、信号频率不对、噪声太大等，排查了一个夜晚，爽熬。信号被增益后波形直接失真非常难看，同时高频分量叠加，找不出哪里问题。后来单独对THS3091调试，模拟了我们的AM信号去试了一下发现也是失真，才发现是模块说明没看。非常头疼，只能说长教训，一定要多看手册模块芯片都看而不能只分析现象。</p><h2 id=代码难题>代码难题<a hidden class=anchor aria-hidden=true href=#代码难题>#</a></h2><p>代码没有什么难题，代码高手说这次比赛唯一要记住的就是要认真看手册。但是代码手因为拾的一个编码器不能用红温了一个下午加晚上。</p><h2 id=联调难题>联调难题<a hidden class=anchor aria-hidden=true href=#联调难题>#</a></h2><p>联调没有什么特殊的大问题，就如同拼积木。需要准备的有很多，比如三通的接口，良好的SMA TO BNC等等，老的线材都坏的差不多了，总是不好使而且坏的太快了得一直拿手给那摁着才能用。联调的时候电源模块是一个大问题，应该说电源转接板，把线性稳压电源的电压美观地供给给各个工作模块。我们拿蚀刻的板子整的，丐到自己都看不下去。第三是亚克力板，虽说纸板加电工胶还挺好看的，但是人穷志不可短，还是需要准备的。我看有的别校的同道中人拿一块大小适中的木板没绷住。</p><h1 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h1><p>题目是比较简单的一道题目，但是确实可以反映出很多经验性或者学识性的问题。正式比赛是短时赛，没有思路或没有准备充分就代表着失败。代码工程文件和完整原理图未来应该会开源。<br>感觉自己好蠢<br><img loading=lazy src=https://img.nanimonai.org/FM_PIC.jpg></p><h1 id=题外话>题外话<a hidden class=anchor aria-hidden=true href=#题外话>#</a></h1><p>LibreOffice在EOS的适配有点小差，反正它和我的相性并不是很好。反正我只是作为一个阅读器而非编辑器的功能去使用，但是连翻页都卡顿的话&mldr;<br>和朋友一起踢球是很美好的享受时刻<br>厦门是一个很美丽的城市，自我放逐太久了，渐渐与时代脱轨。美食可愈三千疾。<br>时间不够用，真的是在从指尖流逝<br>想到什么再补充</p><p><strong>DONE.</strong></p></div><footer class=post-footer><ul class=post-tags></ul></footer><script src=https://giscus.app/client.js data-repo=nanimonaic/docx data-repo-id=R_kgDOKiAoMQ data-category-id=DIC_kwDOKiAoMc4CaPcT data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.nanimonai.org/>nanimonai's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>